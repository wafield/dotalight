<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>DotaLight</title>

    <link href="/dotalight/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/dotalight/static/css/portal.css" rel="stylesheet">
    <script type="text/javascript" src="/dotalight/static/js/jquery.min.js"></script>
    <script type="text/javascript" src="/dotalight/static/js/bootstrap.min.js"></script>
  </head>

  <body>
    <div class="site-wrapper">
      <div class="cover-container">
        <div class="cover">
          <div class="lead">
            <h2 class="title">DotaLight</h2>
          </div>
          <div class="logo-container"><img src="/dotalight/static/img/dota2_logo.png" alt="Dota 2 Logo" class="logo"></div>
          <div class="lead" id="input_box">
            <p><input id="input_user_name" type="text" class="input-bar" autocomplete="off" autofocus="autofocus" placeholder="Type In Steam Vanity URL"></p>
            <p><button id="btn_submit" class="btn btn-lg btn-default">Update User Profile</button></p>
          </div>
        </div>
        <div class="place-holder">
          <img id="update_progress" src="/dotalight/static/img/in-progress.gif" class="progress-img">
          <p id="server_response"></p>
        </div>
        <p class="disclaimer">Dota 2 match data analyzer. By DotaLight team. <br> Dota 2 is a registered trademark of Valve Corporation.</p>
      </div>
    </div>
    <script>
      $('#btn_submit').click(function() {
        var vanity_url = $('#input_user_name').val();
        if (vanity_url.length === 0 ||
            vanity_url !== escape(vanity_url) ||
            vanity_url.indexOf('/') !== -1) {
          alert('Invalid Steam Vanity URL!');
        } else {
          $('#update_progress').css('display', 'inline');
          $.post('', {update: '1', vanity_url: vanity_url})
           .done(function(data) {
            $('#update_progress').css('display', 'none');
            $('#server_response').html(data);
            });
        }
      });
    </script>
  </body>
</html>
